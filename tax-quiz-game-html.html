<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ‹æ…¶ç¨…å‹™å°é”äºº</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            min-height: 100vh;
            background: linear-gradient(135deg, #fef2f2 0%, #fff 50%, #eff6ff 100%);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .title {
            font-size: 2rem;
            font-weight: bold;
            color: #dc2626;
            margin-bottom: 10px;
        }
        
        .flag-count {
            font-size: 1.2rem;
            color: #2563eb;
            font-weight: bold;
        }
        
        .question-section {
            margin-bottom: 30px;
        }
        
        .question-number {
            font-size: 0.9rem;
            color: #6b7280;
            margin-bottom: 10px;
        }
        
        .question-text {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1f2937;
            margin-bottom: 30px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            padding: 15px 20px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1.1rem;
        }
        
        .option:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .option.selected {
            border-color: #dc2626;
            background: #fef2f2;
        }
        
        .option.correct {
            border-color: #22c55e;
            background: #f0fdf4;
            color: #15803d;
        }
        
        .option.incorrect {
            border-color: #ef4444;
            background: #fef2f2;
            color: #b91c1c;
        }
        
        .option.disabled {
            background: #f9fafb;
            color: #9ca3af;
            cursor: default;
        }
        
        .result-box {
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .result-correct {
            background: #f0fdf4;
            color: #15803d;
            border: 2px solid #22c55e;
        }
        
        .result-incorrect {
            background: #fef2f2;
            color: #b91c1c;
            border: 2px solid #ef4444;
        }
        
        .explanation {
            padding: 20px;
            background: #eff6ff;
            border-radius: 12px;
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .explanation-title {
            font-weight: bold;
            color: #1d4ed8;
            margin-bottom: 10px;
        }
        
        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(220, 38, 38, 0.3);
        }
        
        .btn-primary:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
        }
        
        .hidden {
            display: none;
        }
        
        .finish-screen {
            text-align: center;
        }
        
        .finish-title {
            font-size: 2.5rem;
            color: #dc2626;
            margin-bottom: 20px;
        }
        
        .finish-message {
            font-size: 1.3rem;
            color: #374151;
            margin-bottom: 30px;
        }
        
        .intro-screen {
            text-align: center;
        }
        
        .intro-title {
            font-size: 2.5rem;
            color: #dc2626;
            margin-bottom: 20px;
        }
        
        .intro-decorations {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            font-size: 3rem;
        }
        
        .flag-wave {
            animation: wave 1.5s ease-in-out infinite;
        }
        
        .firework {
            animation: pulse 1s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(15deg); }
            75% { transform: rotate(-15deg); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
        }
        
        .rules {
            text-align: left;
            background: #f9fafb;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #fecaca;
        }
        
        .rule-item {
            margin-bottom: 15px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .staff-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px dashed #e5e7eb;
        }
        
        .staff-input-container {
            background: #f9fafb;
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
        }
        
        .staff-input {
            width: 150px;
            padding: 10px;
            font-size: 1.2rem;
            text-align: center;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .staff-btns {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        
        .btn-small {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-confirm {
            background: #22c55e;
            color: white;
        }
        
        .btn-confirm:hover {
            background: #16a34a;
        }
        
        .btn-cancel {
            background: #9ca3af;
            color: white;
        }
        
        .btn-cancel:hover {
            background: #6b7280;
        }
        
        .verified-badge {
            background: #dcfce7;
            color: #15803d;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #86efac;
            font-weight: bold;
            margin-top: 15px;
        }
        
        .social-links {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .social-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: bold;
            color: white;
            transition: all 0.3s;
        }
        
        .social-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-facebook {
            background: #1877f2;
        }
        
        .btn-youtube {
            background: #ff0000;
        }
        
        .social-icon {
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é–‹å§‹ç•«é¢ -->
        <div id="introScreen">
            <div class="intro-screen">
                <div class="intro-decorations">
                    <span class="flag-wave">ğŸ‡¹ğŸ‡¼</span>
                    <span class="firework">ğŸ†</span>
                    <span class="flag-wave">ğŸ‡¹ğŸ‡¼</span>
                    <span class="firework">ğŸ‡</span>
                    <span class="flag-wave">ğŸ‡¹ğŸ‡¼</span>
                </div>
                <h1 class="intro-title">ğŸŠ åœ‹æ…¶ç¨…å‹™å°é”äºº ğŸŠ</h1>
                <div style="font-size: 1.2rem; color: #2563eb; margin-bottom: 30px;">
                    ğŸ‰ æ…¶ç¥ä¸­è¯æ°‘åœ‹åœ‹æ…¶ ğŸ‰
                </div>
                <div class="rules">
                    <h2 style="color: #dc2626; margin-bottom: 20px;">ğŸ® éŠæˆ²ç©æ³•</h2>
                    <div class="rule-item">âœ… å›ç­”ç¨…å‹™ç›¸é—œå•é¡Œ</div>
                    <div class="rule-item">ğŸš© æ¯ç­”å°ä¸€é¡Œç²å¾—ä¸€é¢åœ‹æ——</div>
                    <div class="rule-item">ğŸ† æ”¶é›†åˆ° <strong style="color: #dc2626;">3é¢åœ‹æ——</strong> å°±å®ŒæˆæŒ‘æˆ°ï¼</div>
                </div>
                <button class="btn btn-primary" onclick="startGame()">ğŸš€ é–‹å§‹æŒ‘æˆ°</button>
            </div>
        </div>
        
        <!-- éŠæˆ²ç•«é¢ -->
        <div id="gameScreen" class="hidden">
            <div class="header">
                <div class="title">ğŸŠ åœ‹æ…¶ç¨…å‹™å°é”äºº ğŸŠ</div>
                <div class="flag-count">åœ‹æ——æ”¶é›†: <span id="flagCount">0</span>/3 ğŸš©</div>
            </div>
            
            <div class="question-section">
                <div class="question-number">ç¬¬ <span id="questionNumber">1</span> é¡Œ</div>
                <div class="question-text" id="questionText"></div>
            </div>
            
            <div class="options" id="optionsContainer"></div>
            
            <div id="resultBox" class="hidden"></div>
            <div id="explanationBox" class="hidden"></div>
            
            <button id="submitBtn" class="btn btn-primary" onclick="submitAnswer()">ç¢ºèªç­”æ¡ˆ</button>
            <button id="nextBtn" class="btn btn-secondary hidden" onclick="nextQuestion()">ç¹¼çºŒæŒ‘æˆ°</button>
        </div>
        
        <!-- çµæŸç•«é¢ -->
        <div id="finishScreen" class="hidden">
            <div class="finish-screen">
                <h1 class="finish-title">ğŸ‰ æ­å–œå®ŒæˆæŒ‘æˆ°ï¼ğŸ‰</h1>
                <div class="finish-message" id="finishMessage"></div>
                
                <!-- ç¤¾ç¾¤åª’é«”é€£çµ -->
                <div class="social-links">
                    <a href="https://www.facebook.com/ChangTax?locale=zh_TW" target="_blank" class="social-btn btn-facebook">
                        <span class="social-icon">ğŸ“˜</span>
                        <span>è¿½è¹¤æˆ‘å€‘çš„ Facebook</span>
                    </a>
                    <a href="https://www.youtube.com/channel/UCyixdD80Dk9LsjB2pr5aHtg" target="_blank" class="social-btn btn-youtube">
                        <span class="social-icon">â–¶ï¸</span>
                        <span>è¨‚é–± YouTube é »é“</span>
                    </a>
                </div>
                
                <!-- å·¥ä½œäººå“¡é©—è­‰å€ -->
                <div class="staff-section">
                    <div id="staffBtnArea">
                        <button class="btn-small btn-cancel" onclick="showStaffInput()">å·¥ä½œäººå“¡é©—è­‰</button>
                        <div style="font-size: 0.9rem; color: #6b7280; margin-top: 5px;">çå“å…Œæ›å°ˆç”¨</div>
                    </div>
                    
                    <div id="staffInputArea" class="hidden">
                        <div class="staff-input-container">
                            <div style="margin-bottom: 10px; font-weight: bold; color: #374151;">è«‹è¼¸å…¥é€šè¡Œç¢¼</div>
                            <input type="password" id="staffCode" class="staff-input" maxlength="3" placeholder="***">
                            <div class="staff-btns">
                                <button class="btn-small btn-confirm" onclick="verifyCode()">âœ“ ç¢ºèª</button>
                                <button class="btn-small btn-cancel" onclick="hideStaffInput()">âœ— å–æ¶ˆ</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="verifiedArea" class="hidden">
                        <div class="verified-badge">âœ… å·²é©—è­‰å®Œæˆï¼Œå¯å…Œæ›çå“ï¼</div>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="resetGame()" style="margin-top: 30px;">ğŸ”„ å†ç©ä¸€æ¬¡</button>
            </div>
        </div>
    </div>

    <script>
        // é¡Œç›®è³‡æ–™
        var questions = [
            { question: "æˆ¿å±‹ç¨…æ¯å¹´å¹¾æœˆé–‹å§‹ç¹³ç´ï¼Ÿ", options: ["3æœˆ", "5æœˆ", "7æœˆ", "9æœˆ"], correct: 1, explanation: "æˆ¿å±‹ç¨…æ¯å¹´5æœˆé–‹å§‹ç¹³ç´ï¼Œç¹³ç´æœŸé–“é€šå¸¸æ˜¯5æœˆ1æ—¥åˆ°5æœˆ31æ—¥ã€‚é€™æ˜¯å°ç£çš„å›ºå®šç¨…æ”¶æ™‚ç¨‹ï¼Œæˆ¿å±‹æ‰€æœ‰äººè¦è¨˜å¾—æŒ‰æ™‚ç¹³ç´å–”ï¼" },
            { question: "ç‰Œç…§ç¨…æ˜¯å°ä»€éº¼æ±è¥¿èª²ç¨…çš„ï¼Ÿ", options: ["æˆ¿å­", "æ±½è»Šæ©Ÿè»Š", "åœŸåœ°", "å•†åº—"], correct: 1, explanation: "ç‰Œç…§ç¨…æ˜¯é‡å°æ±½è»Šã€æ©Ÿè»Šç­‰è»Šè¼›èª²å¾µçš„ç¨…ï¼Œç›®çš„æ˜¯è¦è»Šä¸»ç‚ºä½¿ç”¨é“è·¯ä»˜è²»ã€‚æ¯å¹´éƒ½è¦ç¹³ç´ï¼Œè®“æ”¿åºœå¯ä»¥ç¶­è­·é“è·¯è¨­æ–½ã€‚" },
            { question: "é›²ç«¯ç™¼ç¥¨å¯ä»¥å¹«æˆ‘å€‘åšä»€éº¼ï¼Ÿ", options: ["è‡ªå‹•å°ç", "ç’°ä¿æ¸›ç´™", "è¨˜éŒ„æ¶ˆè²»", "ä»¥ä¸Šéƒ½å°"], correct: 3, explanation: "é›²ç«¯ç™¼ç¥¨çœŸçš„å¾ˆæ£’ï¼å®ƒå¯ä»¥è‡ªå‹•å¹«æˆ‘å€‘å°çï¼Œä¸ç”¨æ“”å¿ƒç™¼ç¥¨éºå¤±ï¼›æ¸›å°‘ç´™å¼µä½¿ç”¨æ›´ç’°ä¿ï¼›é‚„èƒ½è‡ªå‹•è¨˜éŒ„æˆ‘å€‘çš„æ¶ˆè²»ï¼Œä¸€èˆ‰å¤šå¾—ï¼" },
            { question: "åœ°åƒ¹ç¨…æ˜¯æ¯å¹´ä»€éº¼æ™‚å€™ç¹³ç´ï¼Ÿ", options: ["5æœˆ", "7æœˆ", "9æœˆ", "11æœˆ"], correct: 3, explanation: "åœ°åƒ¹ç¨…æ¯å¹´11æœˆé–‹å§‹ç¹³ç´ï¼Œé€šå¸¸ç¹³ç´æœŸé–“æ˜¯11æœˆ1æ—¥åˆ°11æœˆ30æ—¥ã€‚é€™æ˜¯é‡å°åœŸåœ°æ‰€æœ‰äººèª²å¾µçš„ç¨…ï¼ŒæŒ‰åœŸåœ°çš„å…¬å‘Šåœ°åƒ¹è¨ˆç®—ã€‚" },
            { question: "ç´ä¿å®˜æ˜¯åšä»€éº¼çš„ï¼Ÿ", options: ["ä¿è­·ç´ç¨…äººæ¬Šç›Š", "æ”¶ç¨…", "è³£ä¿éšª", "é–‹ç½°å–®"], correct: 0, explanation: "ç´ä¿å®˜å…¨åæ˜¯ã€Œç´ç¨…è€…æ¬Šåˆ©ä¿è­·å®˜ã€ï¼Œå°ˆé–€ä¿è­·ç´ç¨…äººçš„æ¬Šç›Šï¼å¦‚æœä½ è¦ºå¾—ç¨…å‹™æ©Ÿé—œçš„è™•åˆ†ä¸å…¬å¹³ï¼Œå¯ä»¥å‘ç´ä¿å®˜ç”³è«‹å”åŠ©ã€‚" },
            { question: "å°å½°åœ¨å½°åŒ–ç¸£æœ‰3æ£Ÿæˆ¿å­ï¼Œè«‹å•å¥¹åœ¨5æœˆæœƒæ”¶åˆ°å¹¾å¼µæˆ¿å±‹ç¨…ç¨…å–®ï¼Ÿ", options: ["1å¼µ", "2å¼µ", "3å¼µ", "4å¼µ"], correct: 2, explanation: "æ¯æ£Ÿæˆ¿å±‹éƒ½æœƒé–‹ç«‹ä¸€å¼µç¨…å–®ï¼Œæ‰€ä»¥å°å½°æœ‰3æ£Ÿæˆ¿å­å°±æœƒæ”¶åˆ°3å¼µæˆ¿å±‹ç¨…ç¨…å–®ã€‚æ¯å¼µç¨…å–®å°æ‡‰ä¸€æ£Ÿæˆ¿å±‹ï¼Œé€™æ¨£æ‰èƒ½æ¸…æ¥šçŸ¥é“æ¯æ£Ÿæˆ¿å±‹çš„ç¨…é¡ã€‚" },
            { question: "ä½¿ç”¨é›²ç«¯ç™¼ç¥¨çš„å¥½è™•æ˜¯ä»€éº¼ï¼Ÿ", options: ["å¯ä»¥çœç´™å¼µ", "ä¸æœƒå¼„ä¸Ÿç™¼ç¥¨", "è‡ªå‹•å­˜èµ·ä¾†", "ä»¥ä¸Šéƒ½å°"], correct: 3, explanation: "é›²ç«¯ç™¼ç¥¨çš„å¥½è™•è¶…å¤šï¼çœç´™å¼µæ„›åœ°çƒã€ä¸æœƒå¼„ä¸Ÿç™¼ç¥¨ã€è‡ªå‹•å„²å­˜åœ¨é›²ç«¯ã€è‡ªå‹•å°çã€é‚„èƒ½è¿½è¹¤æ¶ˆè²»è¨˜éŒ„ï¼ŒçœŸçš„å¾ˆæ–¹ä¾¿ï¼" },
            { question: "è»Šä¸»å¯å°±åŒä¸€ç¸£ï¼ˆå¸‚ï¼‰å…§å…¨éƒ¨è»Šè¼›ç”³è«‹ä½¿ç”¨ç‰Œç…§ç¨…ç¨…å–®æ­¸æˆ¶ï¼Œæ¯å¼µç¨…å–®æœ€å¤šå¯ä»¥æ­¸æˆ¶å¹¾è¼›ï¼Ÿ", options: ["3è¼›", "4è¼›", "5è¼›", "6è¼›"], correct: 2, explanation: "ç¾è¡Œè»Šä¸»å¦‚åä¸‹æœ‰5è¼›è»Šï¼Œæ¯å¹´é ˆæ‹¿5å¼µç¨…å–®å»ç¹³ç´ï¼Œç”³è«‹æ­¸æˆ¶å¾Œï¼Œåªé ˆæ‹¿1å¼µç¹³æ¬¾æ›¸å°±å¯å®Œæˆç¹³ç´ï¼Œæ–¹ä¾¿åˆç’°ä¿ã€‚" },
            { question: "æˆ¿å±‹ç¨…æ–°åˆ¶è‡ª113å¹´7æœˆ1æ—¥èµ·å¯¦æ–½ï¼Œå¢è¨‚è‡ªä½æˆ¿å±‹éœ€æœ¬äººã€é…å¶æˆ–ç›´ç³»è¦ªå±¬è¾¦ç«£æˆ¶ç±ç™»è¨˜ï¼Œæ‰é©ç”¨è‡ªä½ä½å®¶ç”¨å„ªæƒ ç¨…ç‡ï¼Œå°ä¸å°ï¼Ÿ", options: ["å°", "ä¸å°", "ä¸ç¢ºå®š", "æ²’è¦å®š"], correct: 0, explanation: "æˆ¿å±‹ç¨…æ–°åˆ¶ç¢ºå¯¦è¦å®šè‡ªä½æˆ¿å±‹éœ€è¦æœ¬äººã€é…å¶æˆ–ç›´ç³»è¦ªå±¬è¾¦ç«£æˆ¶ç±ç™»è¨˜ï¼Œæ‰èƒ½é©ç”¨è‡ªä½ä½å®¶ç”¨çš„å„ªæƒ ç¨…ç‡ã€‚é€™æ˜¯ç‚ºäº†ç¢ºä¿çœŸæ­£è‡ªä½ä½¿ç”¨ã€‚" },
            { question: "ç”³è«‹åœ°åƒ¹ç¨…è‡ªç”¨ä½å®…ç”¨åœ°å„ªæƒ ç¨…ç‡ï¼Œæ‡‰æ–¼æ¯å¹´å¹¾æœˆå¹¾æ—¥å‰æå‡ºç”³è«‹ï¼Œç•¶å¹´åº¦æ‰å¯é©ç”¨ï¼Ÿ", options: ["8æœˆ31æ—¥", "9æœˆ22æ—¥", "10æœˆ15æ—¥", "11æœˆ1æ—¥"], correct: 1, explanation: "ç”³è«‹åœ°åƒ¹ç¨…è‡ªç”¨ä½å®…ç”¨åœ°å„ªæƒ ç¨…ç‡ï¼Œéœ€è¦åœ¨æ¯å¹´9æœˆ22æ—¥å‰æå‡ºç”³è«‹ï¼Œç•¶å¹´åº¦æ‰å¯ä»¥é©ç”¨å„ªæƒ ç¨…ç‡ã€‚è¨˜å¾—è¦æå‰ç”³è«‹å–”ï¼" },
            { question: "æœ‰è¨­å®šä¸­ççé‡‘è‡ªå‹•åŒ¯æ¬¾çš„è¼‰å…·ï¼Œé›²ç«¯ç™¼ç¥¨ä¸­çäº†æœƒæ€éº¼æ¨£ï¼Ÿ", options: ["è¦è‡ªå·±å»é ˜", "æœƒè‡ªå‹•åŒ¯å…¥å¸³æˆ¶", "æœƒå¯„é€šçŸ¥å–®", "ä¸æœƒä¸­ç"], correct: 1, explanation: "é›²ç«¯ç™¼ç¥¨ä¸­çæœ€æ£’çš„åœ°æ–¹å°±æ˜¯æœƒè‡ªå‹•åŒ¯å…¥ä½ è¨­å®šçš„å¸³æˆ¶ï¼ä¸ç”¨æ“”å¿ƒå¿˜è¨˜é ˜çæˆ–ç™¼ç¥¨éæœŸï¼Œç³»çµ±æœƒè‡ªå‹•å¹«ä½ è™•ç†ï¼Œè¶…æ–¹ä¾¿çš„ï¼" },
            { question: "ç´ä¿å®˜å¯ä»¥å¹«ç´ç¨…äººåšä»€éº¼ï¼Ÿ", options: ["ä»£ç¹³ç¨…æ¬¾", "ç”³è«‹åˆ†æœŸç¹³ç´", "ç¶­è­·æ¬Šç›Š", "æ¸›å…ç¨…é¡"], correct: 2, explanation: "ç´ä¿å®˜ä¸»è¦æ˜¯ç¶­è­·ç´ç¨…äººçš„æ¬Šç›Šï¼Œå”åŠ©è™•ç†ç¨…å‹™çˆ­è­°ã€‚é›–ç„¶ä¸èƒ½ç›´æ¥ä»£ç¹³ç¨…æ¬¾æˆ–æ¸›å…ç¨…é¡ï¼Œä½†å¯ä»¥å”åŠ©ä½ äº†è§£æ¬Šåˆ©ã€ç”³è¨´ç¨‹åºç­‰ã€‚" },
            { question: "ä¸‹åˆ—ä½•è€…ç¬¦åˆæ€§åˆ¥å¹³ç­‰è§€å¿µï¼Ÿ", options: ["ç”·ç”Ÿè² è²¬å·¥ä½œ", "å¥³ç”Ÿè² è²¬å®¶äº‹", "å®¶å‹™ä¸åˆ†ç”·ç”Ÿå’Œå¥³ç”Ÿï¼Œæ‡‰è©²å…±åŒè² æ“”", "ç”·å¥³ç”Ÿæœ‰ä¸åŒåˆ†å·¥"], correct: 2, explanation: "æ€§åˆ¥å¹³ç­‰çš„è§€å¿µæ˜¯ä¸è«–ç”·ç”Ÿå¥³ç”Ÿï¼Œéƒ½æ‡‰è©²å…±åŒè² æ“”å®¶å‹™å’Œå·¥ä½œè²¬ä»»ã€‚æ¯å€‹äººéƒ½æœ‰å¹³ç­‰çš„æ¬Šåˆ©å’Œç¾©å‹™ï¼Œä¸æ‡‰è©²å› ç‚ºæ€§åˆ¥è€Œæœ‰å·®åˆ¥å¾…é‡ã€‚" },
            { question: "æˆ¿å±‹ç¨…æ–°åˆ¶è‡ª113å¹´7æœˆ1æ—¥èµ·å¯¦æ–½ï¼Œä¸¦æ”¹æŒ‰ã€Œå¹´ã€è¨ˆå¾µï¼Œä»¥æ¯å¹´å¹¾æœˆæœ«æ—¥ç‚ºç´ç¨…ç¾©å‹™åŸºæº–æ—¥ï¼Ÿ", options: ["1æœˆ", "2æœˆ", "3æœˆ", "4æœˆ"], correct: 1, explanation: "æˆ¿å±‹ç¨…æ–°åˆ¶æ”¹æŒ‰å¹´è¨ˆå¾µå¾Œï¼Œä»¥æ¯å¹´2æœˆæœ«æ—¥ç‚ºç´ç¨…ç¾©å‹™åŸºæº–æ—¥ã€‚é€™è¡¨ç¤ºæˆ¿å±‹çš„ä½¿ç”¨æƒ…æ³å’Œç¨…ç‡é©ç”¨ï¼Œéƒ½ä»¥2æœˆåº•çš„ç‹€æ³ç‚ºæº–ã€‚" },
            { question: "å¦‚æœä½ æœ‰åœ°æ–¹ç¨…å•é¡Œï¼Œå¯å‘å“ªä¸€å€‹æ©Ÿé—œè©¢å•ï¼Ÿ", options: ["è­¦å¯Ÿå±€", "åœ°æ–¹ç¨…å‹™å±€", "å€å…¬æ‰€", "éƒµå±€"], correct: 1, explanation: "æœ‰åœ°æ–¹ç¨…å•é¡Œç•¶ç„¶è¦æ‰¾åœ°æ–¹ç¨…å‹™å±€ï¼ä»–å€‘æ˜¯å°ˆé–€è™•ç†æˆ¿å±‹ç¨…ã€åœ°åƒ¹ç¨…ã€ç‰Œç…§ç¨…ç­‰åœ°æ–¹ç¨…å‹™çš„å°ˆæ¥­æ©Ÿé—œï¼Œå¯ä»¥æä¾›æœ€æ­£ç¢ºçš„è³‡è¨Šå’Œæœå‹™ã€‚" }
        ];
        
        // éŠæˆ²ç‹€æ…‹
        var gameState = {
            currentQuestions: [],
            currentIndex: 0,
            selectedAnswer: null,
            flags: 0,
            showResult: false,
            verified: false
        };
        
        // æ´—ç‰Œå‡½æ•¸
        function shuffle(array) {
            var arr = array.slice();
            for (var i = arr.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = arr[i];
                arr[i] = arr[j];
                arr[j] = temp;
            }
            return arr;
        }
        
        // é¡¯ç¤ºå·¥ä½œäººå“¡è¼¸å…¥å€
        function showStaffInput() {
            document.getElementById('staffBtnArea').classList.add('hidden');
            document.getElementById('staffInputArea').classList.remove('hidden');
            document.getElementById('staffCode').value = '';
            document.getElementById('staffCode').focus();
        }
        
        // éš±è—å·¥ä½œäººå“¡è¼¸å…¥å€
        function hideStaffInput() {
            document.getElementById('staffBtnArea').classList.remove('hidden');
            document.getElementById('staffInputArea').classList.add('hidden');
            document.getElementById('staffCode').value = '';
        }
        
        // é©—è­‰é€šè¡Œç¢¼
        function verifyCode() {
            var code = document.getElementById('staffCode').value;
            if (code === '123') {
                // é¡¯ç¤ºé©—è­‰æˆåŠŸ
                gameState.verified = true;
                document.getElementById('staffInputArea').classList.add('hidden');
                document.getElementById('verifiedArea').classList.remove('hidden');
                document.getElementById('staffBtnArea').classList.add('hidden');
                
                // å‚³é€ API
                fetch("https://script.google.com/macros/s/AKfycbzhCrmQs7ZafBtdOjE7BaR8XotwupViCNNyzVEAm9oHbIRswCqvySQPih4wOrek5ZaZ/exec", {
                    method: "POST",
                    body: JSON.stringify({player: "Amy"}),
                })
                .then(function(res) {
                    return res.json();
                })
                .then(function(data) {
                    console.log('API å›æ‡‰:', data);
                })
                .catch(function(error) {
                    console.error('API éŒ¯èª¤:', error);
                });
                
            } else {
                alert('âŒ é€šè¡Œç¢¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥ï¼');
                document.getElementById('staffCode').value = '';
                document.getElementById('staffCode').focus();
            }
        }
        
        // é–‹å§‹éŠæˆ²
        function startGame() {
            gameState.currentQuestions = shuffle(questions);
            gameState.currentIndex = 0;
            gameState.selectedAnswer = null;
            gameState.flags = 0;
            gameState.showResult = false;
            
            document.getElementById('introScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            
            loadQuestion();
        }
        
        // è¼‰å…¥é¡Œç›®
        function loadQuestion() {
            var q = gameState.currentQuestions[gameState.currentIndex];
            
            document.getElementById('questionNumber').textContent = gameState.currentIndex + 1;
            document.getElementById('questionText').textContent = q.question;
            document.getElementById('flagCount').textContent = gameState.flags;
            
            var container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            for (var i = 0; i < q.options.length; i++) {
                var option = document.createElement('div');
                option.className = 'option';
                option.textContent = String.fromCharCode(65 + i) + '. ' + q.options[i];
                option.setAttribute('data-index', i);
                option.onclick = function() {
                    selectOption(this);
                };
                container.appendChild(option);
            }
            
            document.getElementById('resultBox').classList.add('hidden');
            document.getElementById('explanationBox').classList.add('hidden');
            document.getElementById('submitBtn').classList.remove('hidden');
            document.getElementById('nextBtn').classList.add('hidden');
            
            gameState.selectedAnswer = null;
            gameState.showResult = false;
        }
        
        // é¸æ“‡é¸é …
        function selectOption(element) {
            if (gameState.showResult) return;
            
            var options = document.querySelectorAll('.option');
            for (var i = 0; i < options.length; i++) {
                options[i].classList.remove('selected');
            }
            
            element.classList.add('selected');
            gameState.selectedAnswer = parseInt(element.getAttribute('data-index'));
        }
        
        // æäº¤ç­”æ¡ˆ
        function submitAnswer() {
            if (gameState.selectedAnswer === null) {
                alert('è«‹å…ˆé¸æ“‡ç­”æ¡ˆï¼');
                return;
            }
            
            gameState.showResult = true;
            var q = gameState.currentQuestions[gameState.currentIndex];
            var isCorrect = gameState.selectedAnswer === q.correct;
            
            var options = document.querySelectorAll('.option');
            for (var i = 0; i < options.length; i++) {
                options[i].onclick = null;
                if (i === q.correct) {
                    options[i].classList.add('correct');
                } else if (i === gameState.selectedAnswer) {
                    options[i].classList.add('incorrect');
                } else {
                    options[i].classList.add('disabled');
                }
            }
            
            var resultBox = document.getElementById('resultBox');
            resultBox.classList.remove('hidden');
            
            if (isCorrect) {
                gameState.flags++;
                resultBox.className = 'result-box result-correct';
                resultBox.textContent = 'ğŸ‰ ç­”å°äº†ï¼ç²å¾—ä¸€é¢åœ‹æ——ï¼';
                document.getElementById('flagCount').textContent = gameState.flags;
            } else {
                resultBox.className = 'result-box result-incorrect';
                resultBox.textContent = 'ç­”éŒ¯äº†ï¼æ­£ç¢ºç­”æ¡ˆæ˜¯ ' + String.fromCharCode(65 + q.correct);
            }
            
            var explanationBox = document.getElementById('explanationBox');
            explanationBox.classList.remove('hidden');
            explanationBox.innerHTML = '<div class="explanation-title">ğŸ’¡ ç­”æ¡ˆè§£æ</div>' + q.explanation;
            
            document.getElementById('submitBtn').classList.add('hidden');
            document.getElementById('nextBtn').classList.remove('hidden');
            
            if (gameState.flags >= 3) {
                document.getElementById('nextBtn').textContent = 'æŸ¥çœ‹çµæœ';
            }
        }
        
        // ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            if (gameState.flags >= 3) {
                finishGame();
                return;
            }
            
            if (gameState.currentIndex < gameState.currentQuestions.length - 1) {
                gameState.currentIndex++;
                loadQuestion();
            } else {
                finishGame();
            }
        }
        
        // çµæŸéŠæˆ²
        function finishGame() {
            document.getElementById('gameScreen').classList.add('hidden');
            document.getElementById('finishScreen').classList.remove('hidden');
            
            var message = document.getElementById('finishMessage');
            if (gameState.flags >= 3) {
                message.innerHTML = 'ğŸ† æŒ‘æˆ°æˆåŠŸï¼<br>ä½ å·²ç¶“æ”¶é›†åˆ° 3 é¢åœ‹æ——äº†ï¼';
            } else {
                message.innerHTML = 'ç¹¼çºŒåŠ æ²¹ï¼<br>ä½ æ”¶é›†åˆ°äº† ' + gameState.flags + ' é¢åœ‹æ——';
            }
        }
        
        // é‡ç½®éŠæˆ²
        function resetGame() {
            gameState.verified = false;
            document.getElementById('finishScreen').classList.add('hidden');
            document.getElementById('introScreen').classList.remove('hidden');
            document.getElementById('staffBtnArea').classList.remove('hidden');
            document.getElementById('staffInputArea').classList.add('hidden');
            document.getElementById('verifiedArea').classList.add('hidden');
            document.getElementById('staffCode').value = '';
        }
    </script>
</body>
</html>